<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Linux中chmod命令 | 钟文浩的博客</title><link rel="stylesheet" href="/libs/spoqa-han-sans-kr/css/SpoqaHanSans-kr.css"><link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="/css/highlights/dracula.css"><link rel="canonical" href="http://zhongwenhao.cn/2018/03/14/linux-chmod/"/>
<meta name="description" content="…">
<meta name="keywords" content="chmod">
<meta property="og:type" content="article">
<meta property="og:title" content="Linux中chmod命令">
<meta property="og:url" content="http://zhongwenhao.cn/2018/03/14/linux-chmod/">
<meta property="og:site_name" content="钟文浩的博客">
<meta property="og:description" content="…">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://zhongwenhao.cn/images/banner/command.jpeg">
<meta property="og:updated_time" content="2018-04-01T16:14:38.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Linux中chmod命令">
<meta name="twitter:description" content="…">
<meta name="twitter:image" content="http://zhongwenhao.cn/images/banner/command.jpeg"><meta property="article:author" content="zhongwenhao"><meta property="twitter:label1" content="Published at"><meta property="twitter:data1" content="2018-03-14 21:36:18"><meta property="twitter:label2" content="Written by"><meta property="twitter:data2" content="zhongwenhao"><link rel="icon" href="/images/favicon.ico"></head><body itemscope itemtype="https://schema.org/WebPage"><nav class="menu" id="menu"><div class="menu-inner"><div class="menu__left-area"><div class="menu__item"><a class="menu__item__link menu__item__link--brand" href="/" title="Home" rel="home"><img class="menu__item__link--brand__image" src="/images/favicon.ico" alt="钟文浩的博客"><span class="menu__item__link--brand__label">钟文浩的博客</span></a></div></div><div class="menu__right-area"><div class="menu__item"><a class="menu__item__link" href="/">主页</a></div><div class="menu__item"><a class="menu__item__link" href="/about">关于</a></div><div class="menu__item"><a class="menu__item__link" href="/archives">文章</a></div></div></div></nav><div class="page-background"></div><div class="content-container"><div class="content-outer"><div class="content-inner" itemscope itemtype="https://schema.org/Blog"><article class="article" id="article" itemscope itemtype="https://schema.org/BlogPosting"><h1 class="article__title" itemprop="headline">Linux中chmod命令</h1><div class="article__meta"><time class="article__meta__time" datetime="2018-03-14T13:36:18.000Z" itemprop="datePublished">2018-03-14 21:36:18</time><div class="article__meta__categories"><a class="article__meta__categories__item" href="/categories/Linux/">Linux</a></div></div><div class="article__contents"><img src="/images/banner/command.jpeg"/><blockquote>
<p>chmod命令用来变更文件或目录的权限。文件或目录权限的控制分别以读取、写入、执行3种一般权限来区分，另有3种特殊权限可供运用。用户可以使用<strong>chmod</strong>指令去变更文件与目录的权限，设置方式采用文字或数字代号皆可。</p>
</blockquote>
<h1 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h1><p>最近有个web/rop项目的需求，项目服务端依靠nginx和php提供。在安装完项目后，访问主页面的时候，主页显示nginx 500，http500状态码，第一反应服务有问题，进入项目log文件夹，发现没有日志。然后查看nginx错误日志，<br>显示项目log目录下没有权限生成日志文件，好了问题找到了，解决吧。</p>
<h1 id="解决"><a href="#解决" class="headerlink" title="解决"></a>解决</h1><p>我一看权限问题，那好办啊，果断使用 sudo chmod -R 777 /  命令，重新访问项目主页，OK，解决问题。<br>但高兴的太早，使用git status命令后，发现被修改权限的目录以及文件，全变成modified，5千个修改，这分支还能用么。 删除掉更改权限的目录，然后重新拉了代码，访问主页，一切又回到了原点。<br>突然想web/www项目安装过程中有关于目录权限处理，然后照猫画虎，chmod -R a+w /log/  命令过后， 重新访问主页，发现已解决；再git status查看，没有冗余修改。至此问题成功解决。<br>问题解决了，想想以前只觉得只要是权限问题，就可以使用777来解决，未免有点太暴力，那就好好研究下chmod命令吧。</p>
<h1 id="学习"><a href="#学习" class="headerlink" title="学习"></a>学习</h1><p>chmod命令用来变更文件或目录的权限。在UNIX系统家族里，文件或目录权限的控制分别以读取、写入、执行3种一般权限来区分，另有3种特殊权限可供运用。用户可以使用chmod指令去变更文件与目录的权限，设置方式采用文字或数字代号皆可。符号连接的权限无法变更，如果用户对符号连接修改权限，其改变会作用在被连接的原始文件。（关于符号链接参考ln -s命令）</p>
<h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">chmod [-cfvR] [--help] [--version] mode file...</div></pre></td></tr></table></figure>
<h3 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h3><blockquote>
<p>mode : 权限设定字串，格式如下 :<br>[ugoa…][[+-=][rwxX]…][,…]</p>
<ul>
<li><p>其中：<br>u 表示该文件的拥有者，g 表示与该文件的拥有者属于同一个群体(group)者，o 表示其他以外的人，a 表示这三者皆是。</p>
<p>+表示增加权限、-表示取消权限、= 表示唯一设定权限。</p>
<p>r 表示可读取，w 表示可写入，x 表示可执行，X 表示只有当该文件是个子目录或者该文件已经被设定过为可执行。</p>
</li>
</ul>
<ul>
<li>其他参数说明：<br> -c : 若该文件权限确实已经更改，才显示其更改动作<br> -f : 若该文件权限无法被更改也不要显示错误讯息<br> -v : 显示权限变更的详细资料<br> -R : 对目前目录下的所有文件与子目录进行相同的权限变更(即以递回的方式逐个变更)<br> –help : 显示辅助说明<br> –version : 显示版本</li>
</ul>
</blockquote>
<h2 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h2><h3 id="文字模式"><a href="#文字模式" class="headerlink" title="文字模式"></a>文字模式</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span>将文件 file1.txt 设为所有人皆可读取</div><div class="line">chmod ugo+r file1.txt</div><div class="line"></div><div class="line"><span class="meta">#</span>将文件 file1.txt 设为所有人皆可读取</div><div class="line">chmod a+r file1.txt</div><div class="line"></div><div class="line"><span class="meta">#</span>将文件 file1.txt 与 file2.txt 设为该文件拥有者，与其所属同一个群体者可写入，但其他以外的人则不可写入 </div><div class="line">chmod ug+w,o-w file1.txt file2.txt</div><div class="line"></div><div class="line"><span class="meta">#</span>将 ex1.py 设定为只有该文件拥有者可以执行</div><div class="line">chmod u+x ex1.py</div><div class="line"></div><div class="line"><span class="meta">#</span>将目前目录下的所有文件与子目录皆设为任何人可读取 :</div><div class="line">chmod -R a+r *</div></pre></td></tr></table></figure>
<h3 id="数字模式"><a href="#数字模式" class="headerlink" title="数字模式"></a>数字模式</h3><p>此外chmod也可以用数字来表示权限如 :</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span>例子</div><div class="line">chmod 777 file</div></pre></td></tr></table></figure>
<h4 id="语法-1"><a href="#语法-1" class="headerlink" title="语法"></a>语法</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">chmod abc file</div></pre></td></tr></table></figure>
<blockquote>
<p>其中a,b,c各为一个数字，分别表示User、Group、及Other的权限。</p>
<p>   r=4，w=2，x=1</p>
<p>   若要rwx属性则4+2+1=7；<br>   若要rw-属性则4+2=6；<br>   若要r-x属性则4+1=5。<br>   很有意思的一个地方，为何数字不是3，2，1，反而是4，2，1。是因为1+2=3，3=3。在解析数字对应权限的时候要对应惟一一种情况，不能出现多种情况都满足。</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span>下面两者相同</div><div class="line">chmod a=rwx file</div><div class="line">chmod 777 file</div><div class="line"></div><div class="line"><span class="meta">#</span>下面两者相同</div><div class="line">chmod ug=rwx,o=x file</div><div class="line">chmod 771 file</div><div class="line"></div><div class="line"><span class="meta">#</span>若用chmod 4755 filename可使此程序具有root的权限</div></pre></td></tr></table></figure>
<h3 id="参考文章："><a href="#参考文章：" class="headerlink" title="参考文章："></a>参考文章：</h3><p><a href="http://man.linuxde.net/chmod" target="_blank" rel="external">Linux大全 chmod命令</a><br><a href="http://www.runoob.com/linux/linux-comm-chmod.html" target="_blank" rel="external">Linux才叫教程 chmod命令</a></p>
</div><div class="article__tags"><a class="article__tags__item" href="/tags/chmod/">chmod</a></div><div class="article__author" itemscope itemprop="author" itemtype="https://schema.org/Person"><img class="article__author__image" src="/images/zhongwenhao.jpg" alt="zhongwenhao"><a class="article__author__link" href="zhongwenhao.cn" title="About zhongwenhao" rel="author">zhongwenhao</a><p class="article__author__desc">miSunLaughing</p><div class="article__author__socials"><a class="article__author__socials__item" href="https://github.com/miSunLaughing" title="github" target="_blank"><i class="fa fa-github"></i></a></div><meta itemprop="name" content="zhongwenhao"></div><!-- Disqus Code--><!-- Meta Tags for Structured Data--><meta itemprop="dateModified" content="2018-04-01T16:14:38.000Z"><meta itemprop="articleBody" content="
chmod命令用来变更文件或目录的权限。文件或目录权限的控制分别以读取、写入、执行3种一般权限来区分，另有3种特殊权限可供运用。用户可以使用chmod指令去变更文件与目录的权限，设置方式采用文字或数字代号皆可。

背景最近有个web/rop项目的需求，项目服务端依靠nginx和php提供。在安装完项目后，访问主页面的时候，主页显示nginx..."><meta itemprop="url" content="http://zhongwenhao.cn/2018/03/14/linux-chmod/"><meta itemprop="mainEntityOfPage" content="http://zhongwenhao.cn/2018/03/14/linux-chmod/"><div itemscope itemtype="https://schema.org/Organization" itemprop="publisher"><meta itemprop="name" content="钟文浩的博客"><div itemscope itemprop="logo" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="http://zhongwenhao.cn/images/favicon.ico"></div></div><div itemscope itemtype="https://schema.org/ImageObject" itemprop="image"><meta itemprop="contentUrl" content="http://zhongwenhao.cn/images/banner/command.jpeg"><meta itemprop="url" content="http://zhongwenhao.cn/images/banner/command.jpeg"><meta itemprop="width" content="1280"><meta itemprop="height" content="720"></div></article></div></div></div><footer id="footer"><div class="widgets"><div class="widgets-inner"><!-- Jade doesn't support dynamic inclusion with `each`.--><!-- So, I just hard coded the file names that will be included.--><div class="widgets__item"><h3 class="widgets__item__heading">最新文章</h3><ul class="recent-posts"><li class="recent-posts__item"><a href="/2018/04/01/css-pointer-events-none/">css黑魔法之鼠标微交互</a></li><li class="recent-posts__item"><a href="/2018/03/14/linux-chmod/">Linux中chmod命令</a></li><li class="recent-posts__item"><a href="/2018/03/02/nodejs-apply-command-shell-python/">nodejs应用中调用系统命令、shell、python脚本</a></li><li class="recent-posts__item"><a href="/2017/10/10/collection/">收藏夹</a></li><li class="recent-posts__item"><a href="/2017/10/09/foreword/">前言</a></li></ul></div><div class="widgets__item"><h3 class="widgets__item__heading">标签云</h3><div class="tag-cloud"><a href="/tags/chmod/" style="font-size: 0.75rem;">chmod</a> <a href="/tags/pointer-events/" style="font-size: 0.75rem;">pointer-events</a> <a href="/tags/scripts/" style="font-size: 0.75rem;">scripts</a> <a href="/tags/前言/" style="font-size: 0.75rem;">前言</a> <a href="/tags/收藏夹/" style="font-size: 0.75rem;">收藏夹</a></div></div><div class="widgets__item"><h3 class="widgets__item__heading">类别</h3><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/CSS/">CSS</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Nodejs/">Nodejs</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/other/">other</a><span class="category-list-count">2</span></li></ul></div></div></div><p class="copyright"><small>© 2018 zhongwenhao<br>Powered by <a href="https://hexo.io" rel="external" target="_blank">Hexo</a>, Theme by <a href="https://github.com/hyunseob" rel="external" target="_blank">HyunSeob</a></small></p></footer><script src="/js/sharer.min.js"></script></body></html>